(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3420],{13619:(e,r,s)=>{"use strict";s.d(r,{E:()=>i});var a=s(95155);s(12115);var t=s(74466),n=s(19433);let l=(0,t.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:r,variant:s,...t}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:s}),r),...t})}},13800:(e,r,s)=>{"use strict";s.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>i,wL:()=>m});var a=s(95155),t=s(12115),n=s(19433);let l=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...t})});l.displayName="Card";let i=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...t})});i.displayName="CardHeader";let o=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...t})});o.displayName="CardTitle";let d=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",s),...t})});d.displayName="CardDescription";let c=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",s),...t})});c.displayName="CardContent";let m=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",s),...t})});m.displayName="CardFooter"},19433:(e,r,s)=>{"use strict";s.d(r,{cn:()=>n});var a=s(52596),t=s(39688);function n(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,t.QP)((0,a.$)(r))}},21126:(e,r,s)=>{Promise.resolve().then(s.bind(s,93642))},31670:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});let a=s(49509).env.NEXT_PUBLIC_API_URL_PROD},49295:(e,r,s)=>{"use strict";s.d(r,{w:()=>i});var a=s(95155),t=s(12115),n=s(87489),l=s(19433);let i=t.forwardRef((e,r)=>{let{className:s,orientation:t="horizontal",decorative:i=!0,...o}=e;return(0,a.jsx)(n.b,{ref:r,decorative:i,orientation:t,className:(0,l.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",s),...o})});i.displayName=n.b.displayName},93642:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>A});var a=s(95155),t=s(12115),n=s(35695),l=s(8376),i=s(24371),o=s(37648),d=s(12543),c=s(19637),m=s(50172),x=s(38224),u=s(24752),h=s.n(u),f=s(23464),p=s(31670),g=s(13800),j=s(13619),v=s(49295),N=s(80244),b=s(19433);let w=t.forwardRef((e,r)=>{let{className:s,children:t,...n}=e;return(0,a.jsxs)(N.bL,{ref:r,className:(0,b.cn)("relative overflow-hidden",s),...n,children:[(0,a.jsx)(N.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,a.jsx)(y,{}),(0,a.jsx)(N.OK,{})]})});w.displayName=N.bL.displayName;let y=t.forwardRef((e,r)=>{let{className:s,orientation:t="vertical",...n}=e;return(0,a.jsx)(N.VM,{ref:r,orientation:t,className:(0,b.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,a.jsx)(N.lr,{className:"relative flex-1 rounded-full bg-border"})})});function E(){let[e,r]=(0,t.useState)({mails:[],wats:[]}),[s,u]=(0,t.useState)(!0),N=(0,n.useSearchParams)(),b=(0,n.useRouter)(),y=N.get("id_modal"),[E,A]=(0,t.useState)(!1);async function C(e){try{A(!0),console.log("ID: ",e);let r=await f.A.get("".concat(p.A,"/api/modales/send_mail/").concat(e));200===r.status?(h().fire({title:"Correo Enviado Correctamente",text:"Es recomendable que revises el correo de Neon Led Publicidad para ver si este correo existe.",icon:"success",confirmButtonText:"OK"}),window.location.reload()):h().fire({title:"Error",text:"No se pudo enviar el mensaje.",icon:"error",confirmButtonText:"OK"})}catch(e){h().fire({title:"Error",text:e.message,icon:"error",confirmButtonText:"OK"})}finally{A(!1)}}(0,t.useEffect)(()=>{(async()=>{if(!y)return u(!1);try{u(!0);let e=await f.A.get("".concat(p.A,"/api/modals_emails_wats/").concat(y));200===e.status?r(e.data):(console.error("Error axios: ",e.status),h().fire({title:"Error",text:"Ocurri\xf3 un error inesperado.",icon:"error",confirmButtonText:"OK"}))}catch(e){h().fire({title:"Error",text:"Ocurri\xf3 un error inesperado.",icon:"error",confirmButtonText:"OK"})}finally{u(!1)}})()},[y]);let _=(e,r)=>1!=e||r&&""!==r?1==e&&r?(0,a.jsxs)(j.E,{variant:"destructive",children:[(0,a.jsx)(i.A,{className:"w-3 h-3 mr-1"})," Error de Env\xedo"]}):0==e?(0,a.jsxs)(j.E,{variant:"outline",className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",children:[(0,a.jsx)(o.A,{className:"w-3 h-3 mr-1"})," Pendiente de Env\xedo"]}):void 0:(0,a.jsxs)(j.E,{variant:"success",className:"bg-green-100 text-green-800 hover:bg-green-200",children:[(0,a.jsx)(l.A,{className:"w-3 h-3 mr-1"})," Enviado Correctamente"]}),R=e=>{if(!e)return"";let r=new Date(e);return new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)};return(0,a.jsxs)("div",{className:"container mx-auto p-4 space-y-6",children:[(0,a.jsxs)("button",{className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-all duration-300 shadow-sm group",onClick:()=>b.push("/dashboard/modales/"),children:[(0,a.jsx)(d.A,{className:"w-5 h-5 transition-transform group-hover:-translate-x-1"}),"Volver a la lista"]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-center",children:"Detalles de Comunicaciones"}),s?(0,a.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"}),(0,a.jsx)("p",{children:"Cargando datos..."})]})}):(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)(g.Zp,{className:"shadow-md hover:shadow-lg transition-shadow",children:[(0,a.jsx)(g.aR,{className:"bg-blue-50 rounded-t-lg",children:(0,a.jsxs)(g.ZB,{className:"flex items-center gap-2 text-blue-700",children:[(0,a.jsx)(c.A,{className:"h-5 w-5"}),"Correos Electr\xf3nicos Enviados"]})}),(0,a.jsx)(g.Wu,{className:"p-0",children:(0,a.jsx)(w,{className:"h-[400px] p-4",children:e.mails.map((r,s)=>{let t=e.mails.slice(0,s).some(e=>0==e.estado);return(0,a.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("h3",{className:"font-medium",children:["Email #",r.number_message]}),_(r.estado,r.error)]}),(0,a.jsx)(v.w,{className:"my-2"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[r.error&&(0,a.jsxs)("div",{className:"text-red-600 bg-red-50 p-2 rounded-md mb-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Error:"})," ",r.error]}),0!=r.estado&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-600 mt-1",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Enviado el ",R(r.fecha)]})]}),0==r.estado&&(0,a.jsx)("button",{title:t?"Primero debes enviar los correos anteriores":"Enviar Mensaje de Email",onClick:()=>!t&&C(r.id_modal_email),className:"mx-auto mt-1 p-2 rounded-xl text-center text-sm ".concat(t?"bg-gray-400 cursor-not-allowed":"bg-green-700 text-white"),disabled:t||E,children:t?"Pendiente anterior":E?(0,a.jsx)(m.A,{className:"animate-spin h-4 w-4 ml-2"}):"Enviar"})]})]},s)})})})]}),(0,a.jsxs)(g.Zp,{className:"shadow-md hover:shadow-lg transition-shadow",children:[(0,a.jsx)(g.aR,{className:"bg-green-50 rounded-t-lg",children:(0,a.jsxs)(g.ZB,{className:"flex items-center gap-2 text-green-700",children:[(0,a.jsx)(x.A,{className:"h-5 w-5"}),"Mensajes de WhatsApp Enviados"]})}),(0,a.jsx)(g.Wu,{className:"p-0",children:(0,a.jsx)(w,{className:"h-[400px] p-4",children:e.wats&&e.wats.length>0?(0,a.jsx)("div",{className:"space-y-4",children:e.wats.map((r,s)=>{let t=e.wats.slice(0,s).some(e=>0==e.estado);return(0,a.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("h3",{className:"font-medium",children:["Mensaje #",r.number_message]}),_(r.estado,r.error)]}),(0,a.jsx)(v.w,{className:"my-2"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm ",children:[r.error&&(0,a.jsxs)("div",{className:"text-red-600 bg-red-50 p-2 rounded-md mb-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Error:"})," ",r.error]}),0!=r.estado&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-gray-600",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Enviado el ",R(r.fecha)]})]}),0==r.estado&&(0,a.jsx)("button",{title:t?"Primero debes enviar los mensajes anteriores":"Enviar Mensaje de WhatsApp",onClick:()=>{t||r.id_modal_wat},className:"mx-auto mt-1 p-2 rounded-xl text-sm ".concat(t?"bg-gray-400 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"),disabled:t,children:t?"Pendiente anterior":"Enviar"})]})]},s)})}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 p-6",children:[(0,a.jsx)(x.A,{className:"h-12 w-12 mb-2 text-gray-400"}),(0,a.jsx)("p",{children:"No hay mensajes de WhatsApp para mostrar"})]})})})]})]})]})}y.displayName=N.VM.displayName,s(79971);let A=()=>(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)("div",{className:"flex justify-center items-center h-screen text-gray-700",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full"}),(0,a.jsx)("p",{children:"Cargando..."})]})}),children:(0,a.jsx)(E,{})})}},e=>{var r=r=>e(e.s=r);e.O(0,[8320,4277,6815,9641,3464,4101,8441,1684,7358],()=>r(21126)),_N_E=e.O()}]);
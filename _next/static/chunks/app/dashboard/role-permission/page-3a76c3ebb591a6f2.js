(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4834],{350:(e,r,t)=>{"use strict";t.d(r,{p:()=>i});var a=t(5155),s=t(2115),o=t(9433);let i=s.forwardRef((e,r)=>{let{className:t,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...i})});i.displayName="Input"},466:(e,r,t)=>{"use strict";t.d(r,{TR:()=>g,bq:()=>p,eb:()=>b,gC:()=>h,l6:()=>c,s3:()=>m,yv:()=>u});var a=t(5155),s=t(2115),o=t(8550),i=t(9556),n=t(7381),l=t(518),d=t(9433);let c=o.bL,m=o.YJ,u=o.WT,p=s.forwardRef((e,r)=>{let{className:t,children:s,...n}=e;return(0,a.jsxs)(o.l9,{ref:r,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,(0,a.jsx)(o.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=o.l9.displayName;let x=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.PP,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=o.PP.displayName;let f=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.wn,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=o.wn.displayName;let h=s.forwardRef((e,r)=>{let{className:t,children:s,position:i="popper",...n}=e;return(0,a.jsx)(o.ZL,{children:(0,a.jsxs)(o.UC,{ref:r,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,a.jsx)(x,{}),(0,a.jsx)(o.LM,{className:(0,d.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(f,{})]})})});h.displayName=o.UC.displayName;let g=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.JU,{ref:r,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",t),...s})});g.displayName=o.JU.displayName;let b=s.forwardRef((e,r)=>{let{className:t,children:s,...i}=e;return(0,a.jsxs)(o.q7,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(o.VF,{children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})}),(0,a.jsx)(o.p4,{children:s})]})});b.displayName=o.q7.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(o.wv,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=o.wv.displayName},1668:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>Q});var a=t(5155),s=t(2115),o=t(5074),i=t(8046),n=t(518),l=t(4956),d=t(3672),c=t(5731),m=t(286),u=t(1573),p=t(9119),x=t(9572),f=t(5703),h=t(1978),g=t(3800),b=t(4885),y=t(9433);let v=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(b.bL,{ref:r,className:(0,y.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:(0,a.jsx)(b.C1,{className:(0,y.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})})});v.displayName=b.bL.displayName;var N=t(350),w=t(466),j=t(9295),k=t(3619);let A=0,C=new Map,E=e=>{if(C.has(e))return;let r=setTimeout(()=>{C.delete(e),O({type:"REMOVE_TOAST",toastId:e})},1e6);C.set(e,r)},S=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?E(t):e.toasts.forEach(e=>{E(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},R=[],T={toasts:[]};function O(e){T=S(T,e),R.forEach(e=>{e(T)})}function P(e){let{...r}=e,t=(A=(A+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>O({type:"DISMISS_TOAST",toastId:t});return O({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>O({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function _(){let[e,r]=s.useState(T);return s.useEffect(()=>(R.push(r),()=>{let e=R.indexOf(r);e>-1&&R.splice(e,1)}),[e]),{...e,toast:P,dismiss:e=>O({type:"DISMISS_TOAST",toastId:e})}}var I=t(5988),z=t(1670);let D="".concat(z.A,"/api"),L=()=>I.A.getToken(),V=async e=>{if(!e.ok)throw Error((await e.json().catch(()=>({}))).message||"Error: ".concat(e.status));return await e.json().catch(()=>({}))},F={getRoles:async()=>{try{let e=I.A.getToken();if(!e)throw Error("No hay token de autenticaci\xf3n");let r=await fetch("".concat(D,"/roles"),{headers:{Authorization:"Bearer ".concat(e)}}),t=await V(r),a=[];return Array.isArray(t)?a=t:t&&Array.isArray(t.roles)?a=t.roles:t&&Array.isArray(t.data)&&(a=t.data),console.log("Roles obtenidos:",a),a}catch(e){return console.error("Error al obtener roles:",e),[]}},getPermisos:async()=>{try{let e=L();if(!e)throw Error("No hay token de autenticaci\xf3n");let r=await fetch("".concat(D,"/permisos"),{headers:{Authorization:"Bearer ".concat(e)}}),t=await V(r),a=[];return Array.isArray(t)?a=t:t&&Array.isArray(t.permisos)?a=t.permisos:t&&Array.isArray(t.data)&&(a=t.data),{permisos:a}}catch(e){return console.error("Error al obtener permisos:",e),{permisos:[]}}},getPermisosDelRol:async e=>{try{if(!e)throw Error("ID de rol no proporcionado");let r=L();if(!r)throw Error("No hay token de autenticaci\xf3n");let t=await fetch("".concat(D,"/roles/").concat(e,"/permisos"),{headers:{Authorization:"Bearer ".concat(r)}}),a=await V(t);console.log("Permisos del rol obtenidos:",a);let s=[];return Array.isArray(a)?s=a:a&&Array.isArray(a.permisos)?s=a.permisos:a&&Array.isArray(a.data)&&(s=a.data),{permisos:s}}catch(r){return console.error("Error al obtener permisos del rol ".concat(e,":"),r),{permisos:[]}}},syncPermisos:async(e,r)=>{try{if(!e)throw Error("ID de rol no proporcionado");let t=L();if(!t)throw Error("No hay token de autenticaci\xf3n");let a=Array.isArray(r)?r:[],s=await fetch("".concat(D,"/roles/").concat(e,"/permisos"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({permisos:a})});return await V(s)}catch(r){return console.error("Error al sincronizar permisos para el rol ".concat(e,":"),r),{success:!1,message:r.message}}}},B={"Ver ":{nombre:"Visualizaci\xf3n",icon:(0,a.jsx)(o.A,{className:"h-4 w-4"}),keywords:["Ver"]},"Crear ":{nombre:"Creaci\xf3n",icon:(0,a.jsx)(i.A,{className:"h-4 w-4"}),keywords:["Crear"]},"Editar ":{nombre:"Edici\xf3n",icon:(0,a.jsx)(n.A,{className:"h-4 w-4"}),keywords:["Editar"]},"Eliminar ":{nombre:"Eliminaci\xf3n",icon:(0,a.jsx)(l.A,{className:"h-4 w-4"}),keywords:["Eliminar"]},"Enviar ":{nombre:"Enviar",icon:(0,a.jsx)(d.A,{className:"h-4 w-4"}),keywords:["Enviar"]},other:{nombre:"Otras Operaciones",icon:(0,a.jsx)(c.A,{className:"h-4 w-4"})}};function J(){var e,r;let[t,i]=(0,s.useState)([]),[n,l]=(0,s.useState)([]),[d,b]=(0,s.useState)(null),[A,C]=(0,s.useState)([]),[E,S]=(0,s.useState)(""),[R,T]=(0,s.useState)("all"),[O,P]=(0,s.useState)(!0),[I,z]=(0,s.useState)(!1),{toast:D}=_(),L=(null==d||null==(e=d.nombre)?void 0:e.toLowerCase())==="administrador";(0,s.useEffect)(()=>{(async()=>{try{P(!0);let e=await F.getRoles();console.log("Roles obtenidos RolePManager:",e),i(e);let r=await F.getPermisos();l(r.permisos)}catch(e){console.error("Error fetching data:",e),D({title:"Error",description:"No se pudieron cargar los datos. Intente nuevamente.",variant:"destructive"})}finally{P(!1)}})()},[D]);let V=async e=>{try{P(!0);let r=t.find(r=>r.id_rol===parseInt(e));b(r);let a=await F.getPermisosDelRol(e);C(a&&a.permisos?a.permisos.map(e=>e.id_permiso):[])}catch(e){console.error("Error selecting role:",e),D({title:"Error",description:"No se pudieron cargar los permisos del rol.",variant:"destructive"}),C([])}finally{P(!1)}},J=e=>{L||C(r=>r.includes(e)?r.filter(r=>r!==e):[...r,e])},M=async()=>{if(d&&!L){if(0===A.length)return void D({title:"Error",description:"Debes seleccionar al menos un permiso antes de guardar.",variant:"destructive"});try{z(!0);let e=await F.syncPermisos(d.id_rol,A);D({title:"\xc9xito",description:e.message||"Permisos actualizados correctamente",variant:"default"})}catch(e){console.error("Error saving permissions:",e),D({title:"Error",description:"No se pudieron guardar los cambios.",variant:"destructive"})}finally{z(!1)}}},U=Array.isArray(n)?n.filter(e=>{if(!e||!e.nombre)return!1;let r=e.nombre.toLowerCase().includes((E||"").toLowerCase());if("all"===R)return r;let t=!1;for(let r in B)if("other"!==r&&e.nombre.startsWith(r)&&r===R){t=!0;break}if("other"===R){for(let r in t=!0,B)if("other"!==r&&e.nombre.startsWith(r)){t=!1;break}}return r&&t}):[],q=(()=>{if(!d)return{total:0,assigned:0,percentage:0};let e=n.length,r=A.length,t=Math.round(r/e*100);return{total:e,assigned:r,percentage:t}})();return(0,a.jsxs)(g.Zp,{className:"border-none shadow-md dark:bg-gray-800/95 dark:border dark:border-gray-700",children:[(0,a.jsx)(g.aR,{className:"bg-gradient-to-r from-[rgb(17,87,211)] to-[rgb(14,70,170)] text-white pb-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(g.ZB,{className:"text-xl md:text-2xl font-bold",children:"Gesti\xf3n de Roles y Permisos"}),(0,a.jsx)(g.BT,{className:"text-gray-100 mt-1",children:"Administra los permisos asignados a cada rol del sistema"})]}),(0,a.jsx)("div",{className:"bg-white/20 p-2 rounded-full",children:(0,a.jsx)(c.A,{className:"h-6 w-6"})})]})}),(0,a.jsx)(g.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"w-full md:w-1/3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5 block",children:"Seleccionar Rol"}),(0,a.jsxs)(w.l6,{disabled:O,onValueChange:V,children:[(0,a.jsx)(w.bq,{className:"w-full border-gray-300 dark:border-gray-600",children:(0,a.jsx)(w.yv,{placeholder:"Selecciona un rol..."})}),(0,a.jsx)(w.gC,{children:(0,a.jsxs)(w.s3,{children:[(0,a.jsx)(w.TR,{children:"Roles Disponibles"}),Array.isArray(t)&&t.length>0?t.map(e=>{var r;return(0,a.jsx)(w.eb,{value:String(e.id_rol),children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{children:e.nombre}),(null==(r=e.nombre)?void 0:r.toLowerCase())==="administrador"&&(0,a.jsx)(k.E,{className:"ml-2 bg-blue-700 text-white text-xs",children:"Admin"})]})},e.id_rol)}):(0,a.jsx)(w.eb,{value:"no-roles",disabled:!0,children:"No hay roles disponibles"})]})})]})]}),d&&(0,a.jsx)("div",{className:"w-full md:w-2/3 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-blue-primary dark:text-blue-300 flex items-center",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-1.5"}),"Rol: ",(0,a.jsx)("span",{className:"font-bold ml-1",children:d.nombre})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-0.5",children:L?"Tiene acceso completo al sistema":"".concat(q.assigned," de ").concat(q.total," permisos asignados (").concat(q.percentage,"%)")})]}),L?(0,a.jsxs)(k.E,{className:"bg-blue-700 text-white flex items-center px-3 py-1",children:[(0,a.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"Permisos Bloqueados"]}):(0,a.jsx)(h.$,{onClick:M,disabled:I||O,className:"bg-blue-primary hover:bg-blue-dark text-white",children:I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.P.div,{animate:{rotate:360},transition:{duration:1,repeat:Number.POSITIVE_INFINITY,ease:"linear"},className:"mr-1.5",children:(0,a.jsx)(c.A,{className:"h-4 w-4"})}),"Guardando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"h-4 w-4 mr-1.5"}),"Guardar Cambios"]})})]})})]}),d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.w,{className:"my-2"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[(0,a.jsx)("div",{className:"w-full md:w-1/4",children:(0,a.jsxs)("div",{className:"sticky top-4",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-1.5"}),"Filtrar por Categor\xeda"]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(h.$,{variant:"ghost",className:(0,y.cn)("w-full justify-start text-sm font-normal","all"===R&&"bg-blue-50 text-blue-primary dark:bg-blue-900/20 dark:text-blue-300"),onClick:()=>T("all"),children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Todos los permisos"]}),Object.entries(B||{}).map(e=>{let[r,t]=e;return(0,a.jsxs)(h.$,{variant:"ghost",className:(0,y.cn)("w-full justify-start text-sm font-normal",R===r&&"bg-blue-50 text-blue-primary dark:bg-blue-900/20 dark:text-blue-300"),onClick:()=>T(r),children:[t.icon,(0,a.jsx)("span",{className:"ml-2",children:t.nombre})]},r)})]}),(0,a.jsx)(j.w,{className:"my-3"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-1 text-sm",children:"Estad\xedsticas"}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Progreso"}),(0,a.jsx)("span",{className:"text-xs font-medium text-blue-primary dark:text-blue-300",children:L?"100%":"".concat(q.percentage,"%")})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-primary h-2 rounded-full",style:{width:L?"100%":"".concat(q.percentage,"%")}})}),(0,a.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2 text-center",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-2 rounded",children:[(0,a.jsx)("div",{className:"text-blue-primary dark:text-blue-300 font-bold",children:L?n.length:q.assigned}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Asignados"})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-2 rounded",children:[(0,a.jsx)("div",{className:"text-gray-700 dark:text-gray-300 font-bold",children:q.total}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"})]})]})]})]})]})}),(0,a.jsxs)("div",{className:"w-full md:w-3/4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:["Permisos"," ","all"!==R&&"- ".concat((null==(r=B[R])?void 0:r.nombre)||"Otros")]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)(N.p,{placeholder:"Buscar permisos...",value:E,onChange:e=>S(e.target.value),className:"pl-9 w-full md:w-64 border-gray-300 dark:border-gray-600"})]})]}),O?(0,a.jsxs)("div",{className:"flex justify-center items-center h-40",children:[(0,a.jsx)(f.P.div,{animate:{rotate:360},transition:{duration:1.5,repeat:Number.POSITIVE_INFINITY,ease:"linear"},children:(0,a.jsx)(c.A,{className:"h-8 w-8 text-blue-primary dark:text-blue-300"})}),(0,a.jsx)("span",{className:"ml-2 text-blue-primary dark:text-blue-300",children:"Cargando permisos..."})]}):(0,a.jsx)(a.Fragment,{children:0===U.length?(0,a.jsxs)("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[(0,a.jsx)(o.A,{className:"h-10 w-10 text-gray-400 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No se encontraron permisos con ese filtro"}),(0,a.jsx)(h.$,{variant:"link",className:"text-blue-primary dark:text-blue-300 mt-1",onClick:()=>{S(""),T("all")},children:"Limpiar filtros"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Array.isArray(U)&&U.length>0?U.map(e=>{var r,t;let s="other";for(let r in B)if("other"!==r&&(null==e||null==(t=e.nombre)?void 0:t.startsWith(r))){s=r;break}let o=L||Array.isArray(A)&&A.includes(e.id_permiso);return(0,a.jsxs)("div",{className:(0,y.cn)("flex items-center p-3 rounded-md border",o?"bg-blue-50 border-blue-200 dark:bg-blue-900/30 dark:border-blue-800/70":"bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700"),children:[(0,a.jsx)(v,{id:"permiso-".concat(e.id_permiso),checked:o,onCheckedChange:()=>J(e.id_permiso),disabled:L||O,className:(0,y.cn)(L&&"opacity-60",o&&"bg-blue-primary border-blue-primary dark:bg-blue-primary dark:border-blue-primary")}),(0,a.jsxs)("div",{className:"ml-3 flex-1",children:[(0,a.jsx)("label",{htmlFor:"permiso-".concat(e.id_permiso),className:(0,y.cn)("text-sm font-medium cursor-pointer",L&&"cursor-not-allowed"),children:e.nombre}),(0,a.jsx)(k.E,{variant:"outline",className:"ml-2 text-xs bg-white text-blue-primary border-blue-200 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800/70",children:(null==(r=B[s])?void 0:r.nombre)||"Otro"})]})]},e.id_permiso)}):(0,a.jsx)("div",{className:"col-span-2 text-center py-4",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No se encontraron permisos"})})})})]})]})]}),!d&&!O&&(0,a.jsxs)("div",{className:"text-center py-12 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,a.jsx)(c.A,{className:"h-12 w-12 text-blue-primary dark:text-blue-300 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-primary dark:text-blue-300 mb-1",children:"Selecciona un Rol"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 max-w-md mx-auto",children:"Selecciona un rol del men\xfa desplegable para ver y administrar sus permisos"})]})]})})]})}var M=t(8555),U=t(2085),q=t(5318);let W=M.Kq,$=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(M.LM,{ref:r,className:(0,y.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s})});$.displayName=M.LM.displayName;let G=(0,U.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Y=s.forwardRef((e,r)=>{let{className:t,variant:s,...o}=e;return(0,a.jsx)(M.bL,{ref:r,className:(0,y.cn)(G({variant:s}),t),...o})});Y.displayName=M.bL.displayName,s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(M.rc,{ref:r,className:(0,y.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s})}).displayName=M.rc.displayName;let Z=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(M.bm,{ref:r,className:(0,y.cn)("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:(0,a.jsx)(q.A,{className:"h-4 w-4"})})});Z.displayName=M.bm.displayName;let X=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(M.hE,{ref:r,className:(0,y.cn)("text-sm font-semibold [&+div]:text-xs",t),...s})});X.displayName=M.hE.displayName;let H=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)(M.VY,{ref:r,className:(0,y.cn)("text-sm opacity-90",t),...s})});function K(){let{toasts:e}=_();return(0,a.jsxs)(W,{children:[e.map(function(e){let{id:r,title:t,description:s,action:o,...i}=e;return(0,a.jsxs)(Y,{...i,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[t&&(0,a.jsx)(X,{children:t}),s&&(0,a.jsx)(H,{children:s})]}),o,(0,a.jsx)(Z,{})]},r)}),(0,a.jsx)($,{})]})}function Q(){return(0,a.jsx)("div",{className:"flex-1 overflow-auto bg-white dark:bg-gray-900",children:(0,a.jsxs)("div",{className:"container py-6",children:[(0,a.jsx)(J,{}),(0,a.jsx)(K,{})]})})}H.displayName=M.VY.displayName},1670:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a="https://back.ledneonpublicidad.com"},1978:(e,r,t)=>{"use strict";t.d(r,{$:()=>d});var a=t(5155),s=t(2115),o=t(9708),i=t(2085),n=t(9433);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:d=!1,...c}=e,m=d?o.DX:"button";return(0,a.jsx)(m,{className:(0,n.cn)(l({variant:s,size:i,className:t})),ref:r,...c})});d.displayName="Button"},3619:(e,r,t)=>{"use strict";t.d(r,{E:()=>n});var a=t(5155);t(2115);var s=t(2085),o=t(9433);let i=(0,s.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:r,variant:t,...s}=e;return(0,a.jsx)("div",{className:(0,o.cn)(i({variant:t}),r),...s})}},3800:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>n,wL:()=>m});var a=t(5155),s=t(2115),o=t(9433);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...s})});i.displayName="Card";let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...s})});n.displayName="CardHeader";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("font-semibold leading-none tracking-tight",t),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("text-sm text-muted-foreground",t),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent";let m=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",t),...s})});m.displayName="CardFooter"},5426:(e,r,t)=>{Promise.resolve().then(t.bind(t,1668))},5988:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(1670),s=t(9971);let o="".concat(a.A,"/api"),i=function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={path:"/",maxAge:86400,sameSite:"lax",...t};if("user"===e&&r&&"object"==typeof r){let t={id:r.id,name:r.name,email:r.email};(0,s.setCookie)(e,JSON.stringify(t),a);return}if("empleado"===e&&r&&"object"==typeof r){let t={id_empleado:r.id_empleado,nombre:r.nombre,apellido:r.apellido,email:r.email};(0,s.setCookie)(e,JSON.stringify(t),a);return}let o="object"==typeof r?JSON.stringify(r):r;(0,s.setCookie)(e,o,a)},n={register:async e=>{try{let r=await fetch("".concat(o,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(!r.ok)throw Error(t.message||"Error en el registro");return t.user&&(0,s.setCookie)("user",JSON.stringify(t.user),{maxAge:86400}),t}catch(e){return console.error("Error en registro:",e),{error:!0,message:e.message}}},login:async e=>{try{let r=await fetch("".concat(o,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await r.json();if(!r.ok)throw Error(t.message||"Error en la autenticaci\xf3n");return i("token",t.token),i("user",t.user),t.empleado&&i("empleado",t.empleado),t.rol&&i("rol",t.rol),t.permisos&&i("permisos",t.permisos),t}catch(e){throw console.error("Error en login:",e),e}},logout:async()=>{try{let e=(0,s.getCookie)("token");if(!e)return{success:!0};let r=await fetch("".concat(o,"/logout"),{method:"POST",headers:{authorization:"Bearer ".concat(e)}}),t=await r.json();if(!r.ok)throw Error(t.message||"Error al cerrar sesi\xf3n");return n.clearAuthCookies(),t}catch(e){return console.error("Error en logout:",e),n.clearAuthCookies(),{error:!0,message:e.message}}},me:async()=>{try{let e=(0,s.getCookie)("token");if(!e)return null;let r=await fetch("".concat(o,"/me"),{method:"GET",headers:{authorization:"Bearer ".concat(e)}}),t=await r.json();if(!r.ok)throw 401===r.status&&n.clearAuthCookies(),Error(t.message||"Error al obtener informaci\xf3n del usuario");return t.user&&i("user",t.user),t.empleado&&i("empleado",t.empleado),t.rol&&i("rol",t.rol),t.permisos&&i("permisos",t.permisos),t}catch(e){return console.error("Error al obtener informaci\xf3n del usuario:",e),{error:!0,message:e.message}}},logoutClient:e=>{n.clearAuthCookies(),e&&e.push("/login")},clearAuthCookies:()=>{(0,s.deleteCookie)("token"),(0,s.deleteCookie)("user"),(0,s.deleteCookie)("empleado"),(0,s.deleteCookie)("rol"),(0,s.deleteCookie)("permisos")},getCurrentUser:()=>{let e=(0,s.getCookie)("user");try{if(e)return"string"==typeof e?JSON.parse(e):e;return null}catch(e){return console.error("Error parsing user cookie:",e),null}},getCurrentEmpleado:()=>{let e=(0,s.getCookie)("empleado");try{if(e)return"string"==typeof e?JSON.parse(e):e;return null}catch(e){return console.error("Error parsing empleado cookie:",e),null}},getCurrentRole:()=>(0,s.getCookie)("rol")||null,getCurrentPermissions:()=>{let e=(0,s.getCookie)("permisos");try{return e?JSON.parse(e):[]}catch(e){return[]}},getToken:()=>(0,s.getCookie)("token"),hasRole:e=>{let r=n.getCurrentRole();return!!r&&r.toLowerCase()===e.toLowerCase()},hasPermission:e=>n.getCurrentPermissions().includes(e),hasAnyPermission:e=>{let r=n.getCurrentPermissions();return e.some(e=>r.includes(e))},isAdmin:()=>n.hasRole("administrador"),isAuthenticated:()=>!!(0,s.getCookie)("token"),refreshAuthData:async()=>await n.me(),isVerifiedAccount:()=>{let e=n.getCurrentUser();return(null==e?void 0:e.email)==="tmlighting@hotmail.com"}},l=n},9295:(e,r,t)=>{"use strict";t.d(r,{w:()=>n});var a=t(5155),s=t(2115),o=t(7489),i=t(9433);let n=s.forwardRef((e,r)=>{let{className:t,orientation:s="horizontal",decorative:n=!0,...l}=e;return(0,a.jsx)(o.b,{ref:r,decorative:n,orientation:s,className:(0,i.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...l})});n.displayName=o.b.displayName},9433:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o});var a=t(2596),s=t(9688);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[4277,6815,5703,6027,7659,8441,1684,7358],()=>r(5426)),_N_E=e.O()}]);
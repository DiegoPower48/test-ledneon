(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5123],{6110:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>h});var r=s(95155),t=s(11518),o=s.n(t),l=s(12115),i=s(35695),n=s(12543),d=s(91721),c=s(31573),u=s(55988),m=s(79971),f=s(6874),x=s.n(f);function h(){let[e,a]=(0,l.useState)({email:"",password:""}),[s,t]=(0,l.useState)(!1),[f,h]=(0,l.useState)(!1),[p,g]=(0,l.useState)(""),j=(0,i.useRouter)(),b=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),y=async a=>{if(a.preventDefault(),t(!0),h(!1),g(""),!b(e.email)){h(!0),g("Por favor, ingresa un email v\xe1lido."),t(!1);return}try{let a=await u.A.login(e);if(a.error)throw Error(a.message);(0,m.setCookie)("token",a.token,{maxAge:2592e3,path:"/"});let s=await u.A.me();if(s.error)throw Error("Error al obtener informaci\xf3n del usuario");(0,m.setCookie)("user",JSON.stringify(s.user),{maxAge:2592e3,path:"/"}),s.empleado&&(0,m.setCookie)("empleado",JSON.stringify(s.empleado),{maxAge:2592e3,path:"/"}),s.rol&&(0,m.setCookie)("rol",s.rol,{maxAge:2592e3,path:"/"}),u.A.isAdmin()||u.A.hasRole("marketing")||u.A.hasRole("ventas"),j.push("/dashboard/main")}catch(e){h(!0),g(e.message||"Email o contrase\xf1a incorrectos.")}finally{t(!1)}},w=s=>{a({...e,[s.target.id]:s.target.value})};return(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 flex flex-col lg:flex-row min-h-screen bg-slate-50",children:[(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 lg:w-1/2 w-full bg-gradient-to-br from-blue-600 via-blue-500 to-blue-700 flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"jsx-d0f8eda2493639a1 absolute inset-0 opacity-10",children:(0,r.jsxs)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"jsx-d0f8eda2493639a1 w-full h-full",children:[(0,r.jsx)("defs",{className:"jsx-d0f8eda2493639a1",children:(0,r.jsx)("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",className:"jsx-d0f8eda2493639a1",children:(0,r.jsx)("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"white",strokeWidth:"0.5",className:"jsx-d0f8eda2493639a1"})})}),(0,r.jsx)("rect",{width:"100",height:"100",fill:"url(#grid)",className:"jsx-d0f8eda2493639a1"})]})}),(0,r.jsx)("div",{className:"jsx-d0f8eda2493639a1 absolute -bottom-16 -left-16 w-64 h-64 bg-blue-400 rounded-full opacity-20 blur-3xl"}),(0,r.jsx)("div",{className:"jsx-d0f8eda2493639a1 absolute -top-16 -right-16 w-64 h-64 bg-blue-300 rounded-full opacity-20 blur-3xl"}),(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 relative z-10 text-center",children:[(0,r.jsx)("h1",{className:"jsx-d0f8eda2493639a1 text-4xl lg:text-5xl font-bold text-white mb-6",children:"\xa1Bienvenido!"}),(0,r.jsx)("p",{className:"jsx-d0f8eda2493639a1 text-white/90 text-lg mb-8 max-w-md",children:"Accede a tu cuenta para gestionar tus recursos y servicios"}),(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 w-64 lg:w-80 h-auto mx-auto relative",children:[(0,r.jsx)("div",{className:"jsx-d0f8eda2493639a1 absolute inset-0 bg-blue-400/20 blur-xl rounded-full"}),(0,r.jsx)("img",{src:"/login/sesion.png",alt:"Inicio de sesi\xf3n",className:"jsx-d0f8eda2493639a1 relative z-10 w-[320px] h-[400px] mx-auto animate-float"})]})]})]}),(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 lg:w-1/2 w-full flex flex-col items-center justify-center p-6 relative border rounded-l-lg",children:[(0,r.jsx)(x(),{href:"/",className:"absolute top-4 right-4",children:(0,r.jsxs)("button",{className:"jsx-d0f8eda2493639a1 flex items-center gap-2 bg-white/80 backdrop-blur-sm px-4 py-2 rounded-lg hover:bg-white hover:scale-105 transition-all duration-300 shadow-lg text-gray-900 border border-blue-100",children:[(0,r.jsx)(n.A,{className:"w-4 h-4"}),"Regresar"]})}),(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 bg-white p-8 lg:p-10 rounded-2xl shadow-xl w-full max-w-md border border-blue-100",children:[(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 text-center mb-8",children:[(0,r.jsx)("div",{className:"jsx-d0f8eda2493639a1 w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(d.A,{className:"w-8 h-8 text-blue-600"})}),(0,r.jsx)("h2",{className:"jsx-d0f8eda2493639a1 text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-400 bg-clip-text text-transparent",children:"Iniciar Sesi\xf3n"}),(0,r.jsx)("p",{className:"jsx-d0f8eda2493639a1 text-slate-500 mt-2",children:"Ingresa tus credenciales para continuar"})]}),f&&(0,r.jsx)("div",{className:"jsx-d0f8eda2493639a1 bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded-r",children:(0,r.jsx)("p",{className:"jsx-d0f8eda2493639a1 text-red-700 text-sm",children:p||"Usuario o contrase\xf1a incorrectos. Por favor, intenta nuevamente."})}),(0,r.jsxs)("form",{onSubmit:y,className:"jsx-d0f8eda2493639a1 space-y-6",children:[(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 space-y-2",children:[(0,r.jsx)("label",{htmlFor:"email",className:"jsx-d0f8eda2493639a1 block text-sm font-medium text-slate-700",children:"Usuario"}),(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 relative group",children:[(0,r.jsx)("div",{className:"jsx-d0f8eda2493639a1 absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(d.A,{className:"h-5 w-5 text-slate-400 group-focus-within:text-blue-500 transition-colors"})}),(0,r.jsx)("input",{type:"text",id:"email",value:e.email,onChange:w,placeholder:"Ingresa tu usuario",required:!0,className:"jsx-d0f8eda2493639a1 block w-full pl-10 pr-3 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-slate-50 transition-colors duration-200"})]})]}),(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 space-y-2",children:[(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 flex items-center justify-between",children:[(0,r.jsx)("label",{htmlFor:"password",className:"jsx-d0f8eda2493639a1 block text-sm font-medium text-slate-700",children:"Contrase\xf1a"}),(0,r.jsx)(x(),{href:"./email/",className:"text-sm text-blue-500 hover:text-blue-700 hover:underline transition-colors",children:"\xbfOlvidaste tu contrase\xf1a?"})]}),(0,r.jsxs)("div",{className:"jsx-d0f8eda2493639a1 relative group",children:[(0,r.jsx)("div",{className:"jsx-d0f8eda2493639a1 absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(c.A,{className:"h-5 w-5 text-slate-400 group-focus-within:text-blue-500 transition-colors"})}),(0,r.jsx)("input",{type:"password",id:"password",value:e.password,onChange:w,placeholder:"Ingresa tu contrase\xf1a",required:!0,className:"jsx-d0f8eda2493639a1 block w-full pl-10 pr-3 py-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-slate-50 transition-colors duration-200"})]})]}),(0,r.jsx)("button",{disabled:s,type:"submit",className:"jsx-d0f8eda2493639a1 w-full bg-gradient-to-r from-blue-600 to-blue-500 text-white py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-blue-600 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 hover:shadow-lg transition-all duration-300 disabled:cursor-not-allowed",children:s?(0,r.jsxs)("span",{className:"jsx-d0f8eda2493639a1 flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:"jsx-d0f8eda2493639a1 animate-spin h-5 w-5",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none",className:"jsx-d0f8eda2493639a1 opacity-25"}),(0,r.jsx)("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",className:"jsx-d0f8eda2493639a1 opacity-75"})]}),"Iniciando sesi\xf3n..."]}):"Iniciar Sesi\xf3n"})]})]}),(0,r.jsx)("div",{className:"jsx-d0f8eda2493639a1 mt-8 text-center text-sm text-slate-500",children:(0,r.jsxs)("p",{className:"jsx-d0f8eda2493639a1",children:["\xa9 ",new Date().getFullYear()," Neon Led Publicidad. Todos los derechos reservados."]})})]}),(0,r.jsx)(o(),{id:"d0f8eda2493639a1",children:"@-webkit-keyframes float{0%,100%{-webkit-transform:translatey(0);transform:translatey(0)}50%{-webkit-transform:translatey(-20px);transform:translatey(-20px)}}@-moz-keyframes float{0%,100%{-moz-transform:translatey(0);transform:translatey(0)}50%{-moz-transform:translatey(-20px);transform:translatey(-20px)}}@-o-keyframes float{0%,100%{-o-transform:translatey(0);transform:translatey(0)}50%{-o-transform:translatey(-20px);transform:translatey(-20px)}}@keyframes float{0%,100%{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}50%{-webkit-transform:translatey(-20px);-moz-transform:translatey(-20px);-o-transform:translatey(-20px);transform:translatey(-20px)}}.animate-float.jsx-d0f8eda2493639a1{-webkit-animation:float 6s ease-in-out infinite;-moz-animation:float 6s ease-in-out infinite;-o-animation:float 6s ease-in-out infinite;animation:float 6s ease-in-out infinite}"})]})}},31670:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=s(49509).env.NEXT_PUBLIC_API_URL_PROD},55988:(e,a,s)=>{"use strict";s.d(a,{A:()=>n});var r=s(31670),t=s(79971);let o="".concat(r.A,"/api"),l=function(e,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={path:"/",maxAge:86400,sameSite:"lax",...s};if("user"===e&&a&&"object"==typeof a){let s={id:a.id,name:a.name,email:a.email};(0,t.setCookie)(e,JSON.stringify(s),r);return}if("empleado"===e&&a&&"object"==typeof a){let s={id_empleado:a.id_empleado,nombre:a.nombre,apellido:a.apellido,email:a.email};(0,t.setCookie)(e,JSON.stringify(s),r);return}let o="object"==typeof a?JSON.stringify(a):a;(0,t.setCookie)(e,o,r)},i={register:async e=>{try{let a=await fetch("".concat(o,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await a.json();if(!a.ok)throw Error(s.message||"Error en el registro");return s.user&&(0,t.setCookie)("user",JSON.stringify(s.user),{maxAge:86400}),s}catch(e){return console.error("Error en registro:",e),{error:!0,message:e.message}}},login:async e=>{try{let a=await fetch("".concat(o,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await a.json();if(!a.ok)throw Error(s.message||"Error en la autenticaci\xf3n");return l("token",s.token),l("user",s.user),s.empleado&&l("empleado",s.empleado),s.rol&&l("rol",s.rol),s.permisos&&l("permisos",s.permisos),s}catch(e){throw console.error("Error en login:",e),e}},logout:async()=>{try{let e=(0,t.getCookie)("token");if(!e)return{success:!0};let a=await fetch("".concat(o,"/logout"),{method:"POST",headers:{authorization:"Bearer ".concat(e)}}),s=await a.json();if(!a.ok)throw Error(s.message||"Error al cerrar sesi\xf3n");return i.clearAuthCookies(),s}catch(e){return console.error("Error en logout:",e),i.clearAuthCookies(),{error:!0,message:e.message}}},me:async()=>{try{let e=(0,t.getCookie)("token");if(!e)return null;let a=await fetch("".concat(o,"/me"),{method:"GET",headers:{authorization:"Bearer ".concat(e)}}),s=await a.json();if(!a.ok)throw 401===a.status&&i.clearAuthCookies(),Error(s.message||"Error al obtener informaci\xf3n del usuario");return s.user&&l("user",s.user),s.empleado&&l("empleado",s.empleado),s.rol&&l("rol",s.rol),s.permisos&&l("permisos",s.permisos),s}catch(e){return console.error("Error al obtener informaci\xf3n del usuario:",e),{error:!0,message:e.message}}},logoutClient:e=>{i.clearAuthCookies(),e&&e.push("/login")},clearAuthCookies:()=>{(0,t.deleteCookie)("token"),(0,t.deleteCookie)("user"),(0,t.deleteCookie)("empleado"),(0,t.deleteCookie)("rol"),(0,t.deleteCookie)("permisos")},getCurrentUser:()=>{let e=(0,t.getCookie)("user");try{if(e)return"string"==typeof e?JSON.parse(e):e;return null}catch(e){return console.error("Error parsing user cookie:",e),null}},getCurrentEmpleado:()=>{let e=(0,t.getCookie)("empleado");try{if(e)return"string"==typeof e?JSON.parse(e):e;return null}catch(e){return console.error("Error parsing empleado cookie:",e),null}},getCurrentRole:()=>(0,t.getCookie)("rol")||null,getCurrentPermissions:()=>{let e=(0,t.getCookie)("permisos");try{return e?JSON.parse(e):[]}catch(e){return[]}},getToken:()=>(0,t.getCookie)("token"),hasRole:e=>{let a=i.getCurrentRole();return!!a&&a.toLowerCase()===e.toLowerCase()},hasPermission:e=>i.getCurrentPermissions().includes(e),hasAnyPermission:e=>{let a=i.getCurrentPermissions();return e.some(e=>a.includes(e))},isAdmin:()=>i.hasRole("administrador"),isAuthenticated:()=>!!(0,t.getCookie)("token"),refreshAuthData:async()=>await i.me(),isVerifiedAccount:()=>{let e=i.getCurrentUser();return(null==e?void 0:e.email)==="tmlighting@hotmail.com"}},n=i},86297:(e,a,s)=>{Promise.resolve().then(s.bind(s,6110))}},e=>{var a=a=>e(e.s=a);e.O(0,[6815,6874,6148,8441,1684,7358],()=>a(86297)),_N_E=e.O()}]);